# 特殊情况处理

在实际完成该协议的过程中，因为不是完整的可靠连接协议，还有很多BUG，为了不让这个协议更加负责，补充了一些特殊情况下的处理

> 这也是为什么TCP需要三次握手，四次挥手，我们希望大家在完成这个Lab的过程中能自己想清楚这一点

## `sender`

1. 对于`START`类型的`ACK`报文丢失，当`sender`判定超时后，此时`receiver`已经建立连接，并准备接收数据，此时直接向`receiver`发送`END`消息
2. `sender`判断`start`的ACK消息损坏后，直接向`receiver`发送`END`消息
3. 对于`END`类型的`ACK`报文丢失，`sender`判断超时后，直接结束

## `receiver`

1. 设置一个超时时间(建议为2s)当超过这个时间没有收到任何包的时候，即认为该连接已经关闭
2. 当`START`报文的checksum错误，receiver进程直接退出即可